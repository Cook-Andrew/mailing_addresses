<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Club Mailing Addresses</title>
		<link rel="stylesheet" href="style.css">
		<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
	</head>
	<body>
		<div>
			<label for="email">Email:</label><br>
			<input type="email" id="email" name="email"><br>
			<label for="password">Password:</label><br>
			<input type="password" id="password" name="password"><br>
			<button onclick="login()">Submit</button>
		</div>
		<div id="content"></div>

		<script>
			// Import the functions you need from the SDKs you need
			import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
			// TODO: Add SDKs for Firebase products that you want to use
			// https://firebase.google.com/docs/web/setup#available-libraries

			// Your web app's Firebase configuration
			const firebaseConfig = {
				apiKey: "AIzaSyCGL7Rq9j-BEpdxwgHDMRehCwuUgMcHkio",
				authDomain: "mailing-addresses.firebaseapp.com",
				projectId: "mailing-addresses",
				storageBucket: "mailing-addresses.appspot.com",
				messagingSenderId: "756600297541",
				appId: "1:756600297541:web:28763a214534316d99ab2c"
			};

			// Initialize Firebase
			const app = initializeApp(firebaseConfig);

			// Get a reference to the auth service
			var auth = firebase.auth();

			// Get a reference to the firestore service
			var db = firebase.firestore();

			function login() {
				var email = document.getElementById('email').value;
				var password = document.getElementById('password').value;

				// Sign in
				auth.signInWithEmailAndPassword(email, password)
					.then((userCredential) => {
						// Signed in 
						var user = userCredential.user;

						// Get data from Firestore
						db.collection("mailingaddresses").get().then((querySnapshot) => {
							querySnapshot.forEach((doc) => {
								document.getElementById('content').innerHTML += doc.data() + '<br>';
							});
						});
					})
					.catch((error) => {
						console.error('Error signing in: ', error);
					});
			}
		</script>
	</body>
</html>
